(function(e,t){"object"==typeof exports?module.exports=t(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],t):e.URI=t(e.punycode,e.IPv6,e.SecondLevelDomains)})(this,function(e,t,r){"use strict";function i(e,t){return this instanceof i?(void 0===e&&(e="undefined"!=typeof location?location.href+"":""),this.href(e),void 0!==t?this.absoluteTo(t):this):new i(e,t)}function n(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function s(e){return(Object.prototype.toString.call(e)+"").slice(8,-1)}function a(e){return"Array"===s(e)}function o(e,t){var r,i,n={};if(a(t))for(r=0,i=t.length;i>r;r++)n[t[r]]=!0;else n[t]=!0;for(r=0,i=e.length;i>r;r++)void 0!==n[e[r]]&&(e.splice(r,1),i--,r--);return e}function u(e,t){var r,i;if(a(t)){for(r=0,i=t.length;i>r;r++)if(!u(e,t[r]))return!1;return!0}var n=s(t);for(r=0,i=e.length;i>r;r++)if("RegExp"===n){if("string"==typeof e[r]&&e[r].match(t))return!0}else if(e[r]===t)return!0;return!1}function h(e,t){if(!a(e)||!a(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var r=0,i=e.length;i>r;r++)if(e[r]!==t[r])return!1;return!0}function p(e){return encodeURIComponent(e).replace(/[!'()*]/g,escape).replace(/\*/g,"%2A")}var c=i.prototype,d=Object.prototype.hasOwnProperty;i._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:i.duplicateQueryParameters}},i.duplicateQueryParameters=!1,i.protocol_expression=/^[a-z][a-z0-9-+-]*$/i,i.idn_expression=/[^a-z0-9\.-]/i,i.punycode_expression=/(xn--)/i,i.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,i.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,i.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},i.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,i.encode=p,i.decode=decodeURIComponent,i.iso8859=function(){i.encode=escape,i.decode=unescape},i.unicode=function(){i.encode=p,i.decode=decodeURIComponent},i.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},i.encodeQuery=function(e){return i.encode(e+"").replace(/%20/g,"+")},i.decodeQuery=function(e){return i.decode((e+"").replace(/\+/g,"%20"))},i.recodePath=function(e){for(var t=(e+"").split("/"),r=0,n=t.length;n>r;r++)t[r]=i.encodePathSegment(i.decode(t[r]));return t.join("/")},i.decodePath=function(e){for(var t=(e+"").split("/"),r=0,n=t.length;n>r;r++)t[r]=i.decodePathSegment(t[r]);return t.join("/")};var l,f={encode:"encode",decode:"decode"},m=function(e,t){return function(r){return i[t](r+"").replace(i.characters[e][t].expression,function(r){return i.characters[e][t].map[r]})}};for(l in f)i[l+"PathSegment"]=m("pathname",f[l]);i.encodeReserved=m("reserved","encode"),i.parse=function(e,t){var r;return t||(t={}),r=e.indexOf("#"),r>-1&&(t.fragment=e.substring(r+1)||null,e=e.substring(0,r)),r=e.indexOf("?"),r>-1&&(t.query=e.substring(r+1)||null,e=e.substring(0,r)),"//"===e.substring(0,2)?(t.protocol="",e=e.substring(2),e=i.parseAuthority(e,t)):(r=e.indexOf(":"),r>-1&&(t.protocol=e.substring(0,r),t.protocol&&!t.protocol.match(i.protocol_expression)?t.protocol=void 0:"file"===t.protocol?e=e.substring(r+3):"//"===e.substring(r+1,r+3)?(e=e.substring(r+3),e=i.parseAuthority(e,t)):(e=e.substring(r+1),t.urn=!0))),t.path=e,t},i.parseHost=function(e,t){var r,i,n=e.indexOf("/");return-1===n&&(n=e.length),"["===e.charAt(0)?(r=e.indexOf("]"),t.hostname=e.substring(1,r)||null,t.port=e.substring(r+2,n)||null):e.indexOf(":")!==e.lastIndexOf(":")?(t.hostname=e.substring(0,n)||null,t.port=null):(i=e.substring(0,n).split(":"),t.hostname=i[0]||null,t.port=i[1]||null),t.hostname&&"/"!==e.substring(n).charAt(0)&&(n++,e="/"+e),e.substring(n)||"/"},i.parseAuthority=function(e,t){return e=i.parseUserinfo(e,t),i.parseHost(e,t)},i.parseUserinfo=function(e,t){var r,n=e.indexOf("@"),s=e.indexOf("/");return n>-1&&(-1===s||s>n)?(r=e.substring(0,n).split(":"),t.username=r[0]?i.decode(r[0]):null,r.shift(),t.password=r[0]?i.decode(r.join(":")):null,e=e.substring(n+1)):(t.username=null,t.password=null),e},i.parseQuery=function(e){if(!e)return{};if(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!e)return{};for(var t,r,n,s={},a=e.split("&"),o=a.length,u=0;o>u;u++)t=a[u].split("="),r=i.decodeQuery(t.shift()),n=t.length?i.decodeQuery(t.join("=")):null,s[r]?("string"==typeof s[r]&&(s[r]=[s[r]]),s[r].push(n)):s[r]=n;return s},i.build=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//"),t+=i.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&"string"==typeof e.hostname&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},i.buildHost=function(e){var t="";return e.hostname?(i.ip6_expression.test(e.hostname)?t+=e.port?"["+e.hostname+"]:"+e.port:e.hostname:(t+=e.hostname,e.port&&(t+=":"+e.port)),t):""},i.buildAuthority=function(e){return i.buildUserinfo(e)+i.buildHost(e)},i.buildUserinfo=function(e){var t="";return e.username&&(t+=i.encode(e.username),e.password&&(t+=":"+i.encode(e.password)),t+="@"),t},i.buildQuery=function(e,t){var r,n,s,o,u="";for(n in e)if(d.call(e,n)&&n)if(a(e[n]))for(r={},s=0,o=e[n].length;o>s;s++)void 0!==e[n][s]&&void 0===r[e[n][s]+""]&&(u+="&"+i.buildQueryParameter(n,e[n][s]),t!==!0&&(r[e[n][s]+""]=!0));else void 0!==e[n]&&(u+="&"+i.buildQueryParameter(n,e[n]));return u.substring(1)},i.buildQueryParameter=function(e,t){return i.encodeQuery(e)+(null!==t?"="+i.encodeQuery(t):"")},i.addQuery=function(e,t,r){if("object"==typeof t)for(var n in t)d.call(t,n)&&i.addQuery(e,n,t[n]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return e[t]=r,void 0;"string"==typeof e[t]&&(e[t]=[e[t]]),a(r)||(r=[r]),e[t]=e[t].concat(r)}},i.removeQuery=function(e,t,r){var n,s,u;if(a(t))for(n=0,s=t.length;s>n;n++)e[t[n]]=void 0;else if("object"==typeof t)for(u in t)d.call(t,u)&&i.removeQuery(e,u,t[u]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==r?e[t]===r?e[t]=void 0:a(e[t])&&(e[t]=o(e[t],r)):e[t]=void 0}},i.hasQuery=function(e,t,r,n){if("object"==typeof t){for(var o in t)if(d.call(t,o)&&!i.hasQuery(e,o,t[o]))return!1;return!0}if("string"!=typeof t)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(s(r)){case"Undefined":return t in e;case"Boolean":var p=Boolean(a(e[t])?e[t].length:e[t]);return r===p;case"Function":return!!r(e[t],t,e);case"Array":if(!a(e[t]))return!1;var c=n?u:h;return c(e[t],r);case"RegExp":return a(e[t])?n?u(e[t],r):!1:Boolean(e[t]&&e[t].match(r));case"Number":r+="";case"String":return a(e[t])?n?u(e[t],r):!1:e[t]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},i.commonPath=function(e,t){var r,i=Math.min(e.length,t.length);for(r=0;i>r;r++)if(e.charAt(r)!==t.charAt(r)){r--;break}return 1>r?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":("/"!==e.charAt(r)&&(r=e.substring(0,r).lastIndexOf("/")),e.substring(0,r+1))},i.withinString=function(e,t){return e.replace(i.find_uri_expression,t)},i.ensureValidHostname=function(t){if(t.match(i.invalid_hostname_characters)){if(!e)throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(e.toASCII(t).match(i.invalid_hostname_characters))throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-]")}},c.build=function(e){return e===!0?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=i.build(this._parts),this._deferred_build=!1),this},c.clone=function(){return new i(this)},c.valueOf=c.toString=function(){return this.build(!1)._string},f={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},m=function(e){return function(t,r){return void 0===t?this._parts[e]||"":(this._parts[e]=t,this.build(!r),this)}};for(l in f)c[l]=m(f[l]);f={query:"?",fragment:"#"},m=function(e,t){return function(r,i){return void 0===r?this._parts[e]||"":(null!==r&&(r+="",r.charAt(0)===t&&(r=r.substring(1))),this._parts[e]=r,this.build(!i),this)}};for(l in f)c[l]=m(l,f[l]);f={search:["?","query"],hash:["#","fragment"]},m=function(e,t){return function(r,i){var n=this[e](r,i);return"string"==typeof n&&n.length?t+n:n}};for(l in f)c[l]=m(f[l][1],f[l][0]);c.pathname=function(e,t){if(void 0===e||e===!0){var r=this._parts.path||(this._parts.urn?"":"/");return e?i.decodePath(r):r}return this._parts.path=e?i.recodePath(e):"/",this.build(!t),this},c.path=c.pathname,c.href=function(e,t){var r;if(void 0===e)return""+this;this._string="",this._parts=i._parts();var n=e instanceof i,s="object"==typeof e&&(e.hostname||e.path);if(!n&&s&&void 0!==e.pathname&&(e=""+e),"string"==typeof e)this._parts=i.parse(e,this._parts);else{if(!n&&!s)throw new TypeError("invalid input");var a=n?e._parts:e;for(r in a)d.call(this._parts,r)&&(this._parts[r]=a[r])}return this.build(!t),this},c.is=function(e){var t=!1,n=!1,s=!1,a=!1,o=!1,u=!1,h=!1,p=!this._parts.urn;switch(this._parts.hostname&&(p=!1,n=i.ip4_expression.test(this._parts.hostname),s=i.ip6_expression.test(this._parts.hostname),t=n||s,a=!t,o=a&&r&&r.has(this._parts.hostname),u=a&&i.idn_expression.test(this._parts.hostname),h=a&&i.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return p;case"absolute":return!p;case"domain":case"name":return a;case"sld":return o;case"ip":return t;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return s;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return h}return null};var g=c.protocol,v=c.port,b=c.hostname;c.protocol=function(e,t){if(void 0!==e&&e&&(e=e.replace(/:(\/\/)?$/,""),e.match(/[^a-zA-z0-9\.+-]/)))throw new TypeError("Protocol '"+e+"' contains characters other than [A-Z0-9.+-]");return g.call(this,e,t)},c.scheme=c.protocol,c.port=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e&&(0===e&&(e=null),e&&(e+="",":"===e.charAt(0)&&(e=e.substring(1)),e.match(/[^0-9]/))))throw new TypeError("Port '"+e+"' contains characters other than [0-9]");return v.call(this,e,t)},c.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var r={};i.parseHost(e,r),e=r.hostname}return b.call(this,e,t)},c.host=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?i.buildHost(this._parts):"":(i.parseHost(e,this._parts),this.build(!t),this)},c.authority=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?i.buildAuthority(this._parts):"":(i.parseAuthority(e,this._parts),this.build(!t),this)},c.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.username)return"";var r=i.buildUserinfo(this._parts);return r.substring(0,r.length-1)}return"@"!==e[e.length-1]&&(e+="@"),i.parseUserinfo(e,this._parts),this.build(!t),this},c.resource=function(e,t){var r;return void 0===e?this.path()+this.search()+this.hash():(r=i.parse(e),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!t),this)},c.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var s=this._parts.hostname.length-this.domain().length,a=this._parts.hostname.substring(0,s),o=RegExp("^"+n(a));return e&&"."!==e.charAt(e.length-1)&&(e+="."),e&&i.ensureValidHostname(e),this._parts.hostname=this._parts.hostname.replace(o,e),this.build(!t),this},c.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&2>r.length)return this._parts.hostname;var s=this._parts.hostname.length-this.tld(t).length-1;return s=this._parts.hostname.lastIndexOf(".",s-1)+1,this._parts.hostname.substring(s)||""}if(!e)throw new TypeError("cannot set domain empty");if(i.ensureValidHostname(e),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var a=RegExp(n(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(a,e)}return this.build(!t),this},c.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.lastIndexOf("."),s=this._parts.hostname.substring(i+1);return t!==!0&&r&&r.list[s.toLowerCase()]?r.get(this._parts.hostname)||s:s}var a;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(e))throw new TypeError("TLD '"+e+"' contains characters other than [A-Z0-9]");a=RegExp(n(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(a,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");a=RegExp(n(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(a,e)}return this.build(!t),this},c.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,s=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return e?i.decodePath(s):s}var a=this._parts.path.length-this.filename().length,o=this._parts.path.substring(0,a),u=RegExp("^"+n(o));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=i.recodePath(e),this._parts.path=this._parts.path.replace(u,e),this.build(!t),this},c.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),s=this._parts.path.substring(r+1);return e?i.decodePathSegment(s):s}var a=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(a=!0);var o=RegExp(n(this.filename())+"$");return e=i.recodePath(e),this._parts.path=this._parts.path.replace(o,e),a?this.normalizePath(t):this.build(!t),this},c.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path||"/"===this._parts.path)return"";var r,s,a=this.filename(),o=a.lastIndexOf(".");return-1===o?"":(r=a.substring(o+1),s=/^[a-z0-9%]+$/i.test(r)?r:"",e?i.decodePathSegment(s):s)}"."===e.charAt(0)&&(e=e.substring(1));var u,h=this.suffix();if(h)u=e?RegExp(n(h)+"$"):RegExp(n("."+h)+"$");else{if(!e)return this;this._parts.path+="."+i.recodePath(e)}return u&&(e=i.recodePath(e),this._parts.path=this._parts.path.replace(u,e)),this.build(!t),this},c.segment=function(e,t,r){var i=this._parts.urn?":":"/",n=this.path(),s="/"===n.substring(0,1),o=n.split(i);if("number"!=typeof e&&(r=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw Error("Bad segment '"+e+"', must be 0-based integer");return s&&o.shift(),0>e&&(e=Math.max(o.length+e,0)),void 0===t?void 0===e?o:o[e]:(null===e||void 0===o[e]?a(t)?o=t:(t||"string"==typeof t&&t.length)&&(""===o[o.length-1]?o[o.length-1]=t:o.push(t)):t||"string"==typeof t&&t.length?o[e]=t:o.splice(e,1),s&&o.unshift(""),this.path(o.join(i),r))};var y=c.query;return c.query=function(e,t){if(e===!0)return i.parseQuery(this._parts.query);if("function"==typeof e){var r=i.parseQuery(this._parts.query),n=e.call(this,r);return this._parts.query=i.buildQuery(n||r,this._parts.duplicateQueryParameters),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=i.buildQuery(e,this._parts.duplicateQueryParameters),this.build(!t),this):y.call(this,e,t)},c.setQuery=function(e,t,r){var n=i.parseQuery(this._parts.query);if("object"==typeof e)for(var s in e)d.call(e,s)&&(n[s]=e[s]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");n[e]=void 0!==t?t:null}return this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters),"string"!=typeof e&&(r=t),this.build(!r),this},c.addQuery=function(e,t,r){var n=i.parseQuery(this._parts.query);return i.addQuery(n,e,void 0===t?null:t),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters),"string"!=typeof e&&(r=t),this.build(!r),this},c.removeQuery=function(e,t,r){var n=i.parseQuery(this._parts.query);return i.removeQuery(n,e,t),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters),"string"!=typeof e&&(r=t),this.build(!r),this},c.hasQuery=function(e,t,r){var n=i.parseQuery(this._parts.query);return i.hasQuery(n,e,t,r)},c.setSearch=c.setQuery,c.addSearch=c.addQuery,c.removeSearch=c.removeQuery,c.hasSearch=c.hasQuery,c.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},c.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},c.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},c.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===i.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},c.normalizePath=function(e){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var t,r,n,s,a=this._parts.path;for("/"!==a.charAt(0)&&("."===a.charAt(0)&&(r=a.substring(0,a.indexOf("/"))),t=!0,a="/"+a),a=a.replace(/(\/(\.\/)+)|\/{2,}/g,"/");;){if(n=a.indexOf("/../"),-1===n)break;if(0===n){a=a.substring(3);break}s=a.substring(0,n).lastIndexOf("/"),-1===s&&(s=n),a=a.substring(0,s)+a.substring(n+3)}return t&&this.is("relative")&&(a=r?r+a:a.substring(1)),a=i.recodePath(a),this._parts.path=a,this.build(!e),this},c.normalizePathname=c.normalizePath,c.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(i.parseQuery(this._parts.query)):this._parts.query=null,this.build(!e)),this},c.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},c.normalizeSearch=c.normalizeQuery,c.normalizeHash=c.normalizeFragment,c.iso8859=function(){var e=i.encode,t=i.decode;return i.encode=escape,i.decode=decodeURIComponent,this.normalize(),i.encode=e,i.decode=t,this},c.unicode=function(){var e=i.encode,t=i.decode;return i.encode=p,i.decode=unescape,this.normalize(),i.encode=e,i.decode=t,this},c.readable=function(){var t=this.clone();t.username("").password("").normalize();var r="";if(t._parts.protocol&&(r+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(r+=e.toUnicode(t._parts.hostname),t._parts.port&&(r+=":"+t._parts.port)):r+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(r+="/"),r+=t.path(!0),t._parts.query){for(var n="",s=0,a=t._parts.query.split("&"),o=a.length;o>s;s++){var u=(a[s]||"").split("=");n+="&"+i.decodeQuery(u[0]).replace(/&/g,"%26"),void 0!==u[1]&&(n+="="+i.decodeQuery(u[1]).replace(/&/g,"%26"))}r+="?"+n.substring(1)}return r+=t.hash()},c.absoluteTo=function(e){var t,r,n,s=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw Error("URNs do not have any generally defined hierachical components");if(e instanceof i||(e=new i(e)),s._parts.protocol||(s._parts.protocol=e._parts.protocol),this._parts.hostname)return s;for(r=0,n;n=a[r];r++)s._parts[n]=e._parts[n];for(a=["query","path"],r=0,n;n=a[r];r++)!s._parts[n]&&e._parts[n]&&(s._parts[n]=e._parts[n]);return"/"!==s.path().charAt(0)&&(t=e.directory(),s._parts.path=(t?t+"/":"")+s._parts.path,s.normalizePath()),s.build(),s},c.relativeTo=function(e){var t,r,s,a,o,u=this.clone(),h=["protocol","username","password","hostname","port"];if(this._parts.urn)throw Error("URNs do not have any generally defined hierachical components");if(e instanceof i||(e=new i(e)),"/"!==this.path().charAt(0)||"/"!==e.path().charAt(0))throw Error("Cannot calculate common path from non-relative URLs");if(t=i.commonPath(u.path(),e.path()),!t||"/"===t)return u;for(var p,c=0;p=h[c];c++)u._parts[p]=null;if(r=e.directory(),s=this.directory(),r===s)return u._parts.path="./"+u.filename(),u.build();if(a=r.substring(t.length),o=s.substring(t.length),r+"/"===t)return o&&(o+="/"),u._parts.path="./"+o+u.filename(),u.build();for(var d="../",l=RegExp("^"+n(t)),f=r.replace(l,"/").match(/\//g).length-1;f--;)d+="../";return u._parts.path=u._parts.path.replace(l,d),u.build()},c.equals=function(e){var t,r,n,s=this.clone(),o=new i(e),u={},p={},c={};if(s.normalize(),o.normalize(),""+s==""+o)return!0;if(t=s.query(),r=o.query(),s.query(""),o.query(""),""+s!=""+o)return!1;if(t.length!==r.length)return!1;u=i.parseQuery(t),p=i.parseQuery(r);for(n in u)if(d.call(u,n)){if(a(u[n])){if(!h(u[n],p[n]))return!1}else if(u[n]!==p[n])return!1;c[n]=!0}for(n in p)if(d.call(p,n)&&!c[n])return!1;return!0},c.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},i});var requirejs,require,define;(function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var r;for(r=0;e.length>r&&(!e[r]||!t(e[r],r,e));r+=1);}}function eachReverse(e,t){if(e){var r;for(r=e.length-1;r>-1&&(!e[r]||!t(e[r],r,e));r-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var r;for(r in e)if(hasProp(e,r)&&t(e[r],r))break}function mixin(e,t,r,i){return t&&eachProp(t,function(t,n){(r||!hasProp(e,n))&&(i&&"string"!=typeof t?(e[n]||(e[n]={}),mixin(e[n],t,r,i)):e[n]=t)}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,r,i){var n=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return n.requireType=e,n.requireModules=i,r&&(n.originalError=r),n}function newContext(e){function t(e){var t,r;for(t=0;e[t];t+=1)if(r=e[t],"."===r)e.splice(t,1),t-=1;else if(".."===r){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}function r(e,r,i){var n,s,a,o,u,h,p,c,d,l,f,m=r&&r.split("/"),g=m,v=q.map,b=v&&v["*"];if(e&&"."===e.charAt(0)&&(r?(g=getOwn(q.pkgs,r)?m=[r]:m.slice(0,m.length-1),e=g.concat(e.split("/")),t(e),s=getOwn(q.pkgs,n=e[0]),e=e.join("/"),s&&e===n+"/"+s.main&&(e=n)):0===e.indexOf("./")&&(e=e.substring(2))),i&&v&&(m||b)){for(o=e.split("/"),u=o.length;u>0;u-=1){if(p=o.slice(0,u).join("/"),m)for(h=m.length;h>0;h-=1)if(a=getOwn(v,m.slice(0,h).join("/")),a&&(a=getOwn(a,p))){c=a,d=u;break}if(c)break;!l&&b&&getOwn(b,p)&&(l=getOwn(b,p),f=u)}!c&&l&&(c=l,d=f),c&&(o.splice(0,d,c),e=o.join("/"))}return e}function i(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===_.contextName?(t.parentNode.removeChild(t),!0):void 0})}function n(e){var t=getOwn(q.paths,e);return t&&isArray(t)&&t.length>1?(i(e),t.shift(),_.require.undef(e),_.require([e]),!0):void 0}function s(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function a(e,t,i,n){var a,o,u,h,p=null,c=t?t.name:null,d=e,l=!0,f="";return e||(l=!1,e="_@r"+(S+=1)),h=s(e),p=h[0],e=h[1],p&&(p=r(p,c,n),o=getOwn(k,p)),e&&(p?f=o&&o.normalize?o.normalize(e,function(e){return r(e,c,n)}):r(e,c,n):(f=r(e,c,n),h=s(f),p=h[0],f=h[1],i=!0,a=_.nameToUrl(f))),u=!p||o||i?"":"_unnormalized"+(R+=1),{prefix:p,name:f,parentMap:t,unnormalized:!!u,url:a,originalName:d,isDefine:l,id:(p?p+"!"+f:f)+u}}function o(e){var t=e.id,r=getOwn(E,t);return r||(r=E[t]=new _.Module(e)),r}function u(e,t,r){var i=e.id,n=getOwn(E,i);!hasProp(k,i)||n&&!n.defineEmitComplete?o(e).on(t,r):"defined"===t&&r(k[i])}function h(e,t){var r=e.requireModules,i=!1;t?t(e):(each(r,function(t){var r=getOwn(E,t);r&&(r.error=e,r.events.error&&(i=!0,r.emit("error",e)))}),i||req.onError(e))}function p(){globalDefQueue.length&&(apsp.apply(Q,[Q.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function c(e){delete E[e],delete A[e]}function d(e,t,r){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,each(e.depMaps,function(i,n){var s=i.id,a=getOwn(E,s);!a||e.depMatched[n]||r[s]||(getOwn(t,s)?(e.defineDep(n,k[s]),e.check()):d(a,t,r))}),r[i]=!0)}function l(){var e,t,r,s,a=1e3*q.waitSeconds,o=a&&_.startTime+a<(new Date).getTime(),u=[],p=[],c=!1,f=!0;if(!b){if(b=!0,eachProp(A,function(r){if(e=r.map,t=e.id,r.enabled&&(e.isDefine||p.push(r),!r.error))if(!r.inited&&o)n(t)?(s=!0,c=!0):(u.push(t),i(t));else if(!r.inited&&r.fetched&&e.isDefine&&(c=!0,!e.prefix))return f=!1}),o&&u.length)return r=makeError("timeout","Load timeout for modules: "+u,null,u),r.contextName=_.contextName,h(r);f&&each(p,function(e){d(e,{},{})}),o&&!s||!c||!isBrowser&&!isWebWorker||w||(w=setTimeout(function(){w=0,l()},50)),b=!1}}function f(e){hasProp(k,e[0])||o(a(e[0],null,!0)).init(e[1],e[2])}function m(e,t,r,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(r,t,!1)}function g(e){var t=e.currentTarget||e.srcElement;return m(t,_.onScriptLoad,"load","onreadystatechange"),m(t,_.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(p();Q.length;){if(e=Q.shift(),null===e[0])return h(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));f(e)}}var b,y,_,x,w,q={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},E={},A={},P={},Q=[],k={},O={},S=1,R=1;return x={require:function(e){return e.require?e.require:e.require=_.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?e.exports:e.exports=k[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return q.config&&getOwn(q.config,e.map.id)||{}},exports:k[e.map.id]}}},y=function(e){this.events=getOwn(P,e.id)||{},this.map=e,this.shim=getOwn(q.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},y.prototype={init:function(e,t,r,i){i=i||{},this.inited||(this.factory=t,r?this.on("error",r):this.events.error&&(r=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=r,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,_.startTime=(new Date).getTime();var e=this.map;return this.shim?(_.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})),void 0):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;O[e]||(O[e]=!0,_.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,r=this.map.id,i=this.depExports,n=this.exports,s=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(isFunction(s)){if(this.events.error)try{n=_.execCb(r,s,i,n)}catch(a){e=a}else n=_.execCb(r,s,i,n);if(this.map.isDefine&&(t=this.module,t&&void 0!==t.exports&&t.exports!==this.exports?n=t.exports:void 0===n&&this.usingExports&&(n=this.exports)),e)return e.requireMap=this.map,e.requireModules=[this.map.id],e.requireType="define",h(this.error=e)}else n=s;this.exports=n,this.map.isDefine&&!this.ignore&&(k[r]=n,req.onResourceLoad&&req.onResourceLoad(_,this.map,this.depMaps)),c(r),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,i=a(e.prefix);this.depMaps.push(i),u(i,"defined",bind(this,function(i){var n,s,p,d=this.map.name,l=this.map.parentMap?this.map.parentMap.name:null,f=_.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(d=i.normalize(d,function(e){return r(e,l,!0)})||""),s=a(e.prefix+"!"+d,this.map.parentMap),u(s,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),p=getOwn(E,s.id),p&&(this.depMaps.push(s),this.events.error&&p.on("error",bind(this,function(e){this.emit("error",e)})),p.enable()),void 0):(n=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),n.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(E,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&c(e.map.id)}),h(e)}),n.fromText=bind(this,function(r,i){var s=e.name,u=a(s),p=useInteractive;i&&(r=i),p&&(useInteractive=!1),o(u),hasProp(q.config,t)&&(q.config[s]=q.config[t]);try{req.exec(r)}catch(c){return h(makeError("fromtexteval","fromText eval for "+t+" failed: "+c,c,[t]))}p&&(useInteractive=!0),this.depMaps.push(u),_.completeLoad(s),f([s],n)}),i.load(e.name,f,n,q),void 0)})),_.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){A[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var r,i,n;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,n=getOwn(x,e.id))return this.depExports[t]=n(this),void 0;this.depCount+=1,u(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&u(e,"error",this.errback)}r=e.id,i=E[r],hasProp(x,r)||!i||i.enabled||_.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(E,e.id);t&&!t.enabled&&_.enable(e,this)
})),this.enabling=!1,this.check()},on:function(e,t){var r=this.events[e];r||(r=this.events[e]=[]),r.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},_={config:q,contextName:e,registry:E,defined:k,urlFetched:O,defQueue:Q,Module:y,makeModuleMap:a,nextTick:req.nextTick,onError:h,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=q.pkgs,r=q.shim,i={paths:!0,config:!0,map:!0};eachProp(e,function(e,t){i[t]?"map"===t?(q.map||(q.map={}),mixin(q[t],e,!0,!0)):mixin(q[t],e,!0):q[t]=e}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=_.makeShimExports(e)),r[t]=e}),q.shim=r),e.packages&&(each(e.packages,function(e){var r;e="string"==typeof e?{name:e}:e,r=e.location,t[e.name]={name:e.name,location:r||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),q.pkgs=t),eachProp(E,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t))}),(e.deps||e.callback)&&_.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,i){function n(r,s,u){var p,c,d;return i.enableBuildCallback&&s&&isFunction(s)&&(s.__requireJsBuild=!0),"string"==typeof r?isFunction(s)?h(makeError("requireargs","Invalid require call"),u):t&&hasProp(x,r)?x[r](E[t.id]):req.get?req.get(_,r,t,n):(c=a(r,t,!1,!0),p=c.id,hasProp(k,p)?k[p]:h(makeError("notloaded",'Module name "'+p+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),_.nextTick(function(){v(),d=o(a(null,t)),d.skipMap=i.skipMap,d.init(r,s,u,{enabled:!0}),l()}),n)}return i=i||{},mixin(n,{isBrowser:isBrowser,toUrl:function(e){var i,n=e.lastIndexOf("."),s=e.split("/")[0],a="."===s||".."===s;return-1!==n&&(!a||n>1)&&(i=e.substring(n,e.length),e=e.substring(0,n)),_.nameToUrl(r(e,t&&t.id,!0),i,!0)},defined:function(e){return hasProp(k,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(k,e)||hasProp(E,e)}}),t||(n.undef=function(e){p();var r=a(e,t,!0),i=getOwn(E,e);delete k[e],delete O[r.url],delete P[e],i&&(i.events.defined&&(P[e]=i.events),c(e))}),n},enable:function(e){var t=getOwn(E,e.id);t&&o(e).enable()},completeLoad:function(e){var t,r,i,s=getOwn(q.shim,e)||{},a=s.exports;for(p();Q.length;){if(r=Q.shift(),null===r[0]){if(r[0]=e,t)break;t=!0}else r[0]===e&&(t=!0);f(r)}if(i=getOwn(E,e),!t&&!hasProp(k,e)&&i&&!i.inited){if(!(!q.enforceDefine||a&&getGlobal(a)))return n(e)?void 0:h(makeError("nodefine","No define call for "+e,null,[e]));f([e,s.deps||[],s.exportsFn])}l()},nameToUrl:function(e,t,r){var i,n,s,a,o,u,h,p,c;if(req.jsExtRegExp.test(e))p=e+(t||"");else{for(i=q.paths,n=q.pkgs,o=e.split("/"),u=o.length;u>0;u-=1){if(h=o.slice(0,u).join("/"),s=getOwn(n,h),c=getOwn(i,h)){isArray(c)&&(c=c[0]),o.splice(0,u,c);break}if(s){a=e===s.name?s.location+"/"+s.main:s.location,o.splice(0,u,a);break}}p=o.join("/"),p+=t||(/\?/.test(p)||r?"":".js"),p=("/"===p.charAt(0)||p.match(/^[\w\+\.\-]+:/)?"":q.baseUrl)+p}return q.urlArgs?p+((-1===p.indexOf("?")?"?":"&")+q.urlArgs):p},load:function(e,t){req.load(_,e,t)},execCb:function(e,t,r,i){return t.apply(i,r)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=g(e);_.completeLoad(t.id)}},onScriptError:function(e){var t=g(e);return n(t.id)?void 0:h(makeError("scripterror","Script error",e,[t.id]))}},_.require=_.makeRequire(),_}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.5",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||!navigator||!document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"==""+opera,contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(void 0===define){if(requirejs!==void 0){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,r,i){var n,s,a=defContextName;return isArray(e)||"string"==typeof e||(s=e,isArray(t)?(e=t,t=r,r=i):e=[]),s&&s.context&&(a=s.context),n=getOwn(contexts,a),n||(n=contexts[a]=req.s.newContext(a)),s&&n.configure(s),n.require(e,t,r)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=function(e){throw e},req.load=function(e,t,r){var i,n=e&&e.config||{};if(isBrowser)return i=n.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),i.type=n.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&0>(""+i.attachEvent).indexOf("[native code")||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=r,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(r),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+r,s,[t]))}},isBrowser&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(cfg.baseUrl||(src=dataMain.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath,dataMain=mainScript),dataMain=dataMain.replace(jsSuffixRegExp,""),cfg.deps=cfg.deps?cfg.deps.concat(dataMain):[dataMain],!0):void 0}),define=function(e,t,r){var i,n;"string"!=typeof e&&(r=t,t=e,e=null),isArray(t)||(r=t,t=[]),!t.length&&isFunction(r)&&r.length&&((""+r).replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,r){t.push(r)}),t=(1===r.length?["require"]:["require","exports","module"]).concat(t)),useInteractive&&(i=currentlyAddingScript||getInteractiveScript(),i&&(e||(e=i.getAttribute("data-requiremodule")),n=contexts[i.getAttribute("data-requirecontext")])),(n?n.defQueue:globalDefQueue).push([e,t,r])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}})(this),function(){define("social-buttons/button",function(){var e;return e=function(){function e(){}return e.lastIndex=0,e}()})}.call(this),function(){define("social-buttons",["social-buttons/button","social-buttons/adapters/facebook","social-buttons/adapters/vkontakte","social-buttons/adapters/twitter"],function(){var e;return e=function(){function e(){}return e.Button=require("social-buttons/button"),e.adapters={facebook:require("social-buttons/adapters/facebook"),vkontakte:require("social-buttons/adapters/vkontakte"),twitter:require("social-buttons/adapters/twitter")},e}(),jQuery.prototype.socialButton=function(){var e,t,r,i;for(t=r=0,i=this.length;i>r;t=++r)e=this[t],console.log("aposkdkopsa");return this}})}.call(this);